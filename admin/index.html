<!DOCTYPE html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width'>
<title>Admin — ALSAQQAF</title><link rel="icon" href="/favicon.png"></head>
<body style="font-family:system-ui;margin:0;background:#0f172a">
<div style="max-width:1150px;margin:30px auto;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,.2)">
<header style="background:linear-gradient(135deg,#1e40af,#1e3a8a);color:#fff;padding:24px;display:flex;align-items:center;gap:12px;justify-content:space-between">
<div style="display:flex;align-items:center;gap:12px"><img src="/logo.png" style="height:48px"><div><div style="font-weight:800">ALSAQQAF LOGISTICS LLC — Admin Dashboard</div><small>View applications and download PDFs</small></div></div>
<form method="POST" action="/admin/logout"><button type="submit" style="background:#dc2626;color:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer">Logout</button></form>
</header>
<main style="padding:24px"><div style="display:flex;gap:10px;align-items:center;margin-bottom:14px"><input id="q" placeholder="Search by name or email" style="padding:10px;border:2px solid #e5e7eb;border-radius:10px;width:260px"><button onclick="loadApps()" style="background:#1e40af;color:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer">Refresh</button></div>
<table style="width:100%;border-collapse:collapse"><thead><tr><th align="left">Date</th><th align="left">Name</th><th align="left">Email</th><th align="left">Phone</th><th align="left">Status</th><th align="left">PDF</th></tr></thead><tbody id="rows"></tbody></table></main>
<footer style="padding:16px;background:#f9fafb;border-top:1px solid #e5e7eb;text-align:center;color:#6b7280">Admin • <a href="/" target="_blank">Open Driver Form</a></footer>
</div>
<script>
let allApps = [];async function loadApps(){const res = await fetch('/api/applications');allApps = await res.json();render();}
function fmt(ts){ const d = new Date(ts||Date.now()); return d.toLocaleString(); }
function render(){const q = document.getElementById('q').value.toLowerCase();const rows = document.getElementById('rows');rows.innerHTML='';
allApps.filter(a => !q || ((`${a.firstName||''} ${a.lastName||''} ${a.email||''}`).toLowerCase().includes(q)))
.forEach(a => {const tr = document.createElement('tr');tr.innerHTML = `<td>${fmt(a.submittedAt)}</td><td>${(a.firstName||'')+' '+(a.lastName||'')}</td><td>${a.email||''}</td><td>${a.phone||''}</td><td>pending</td><td><a href="/api/applications/${a.id}/pdf" target="_blank">Download</a></td>`;rows.appendChild(tr);});}
document.getElementById('q').addEventListener('input', render);loadApps();
</script></body></html>